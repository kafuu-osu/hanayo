{{/*###
Handler=/
TitleBar=HOmE
KyutGrill=homepage2.jpg
*/}}
{{ define "tpl" }}
{{ $cf := .ClientFlags }}
{{ $ds := band $cf 1 }}
{{ $   := . }}

{{/* CSS Zone */}}
<style>
	.status {
		display: flex;
		font-size: 14px;
		font-weight: 500;
		z-index: 3;
		position: absolute;
		-webkit-transform: translateY(-100px) translateX(5px);
		transform: translateY(-100px) translateX(5px);
		padding: 2px 10px;
		color: #fff;
		margin-left: 5px;
		border-radius: 20px;
		background: rgba(0,0,0,.6);
	}
</style>
{{/* End CSS */}}

	<div class="ui container">
		<div class=""> 
		<div class="main-block" style="height: 800px; background-color: #E3F2FD; padding: 20px; align-items: center; justify-content: center; font-size: 36px; flex-direction: column; border: 1px solid #353535; font-weight: lighter;">
			<div>欢迎来到osu-kafuu!</div>
			<div style="font-size: 16px; padding: 40px;"><div>这个网站是临时的，所以就是这么简陋。。（我懒得弄了）</div>
			<div>新网站即将推出</div>
			<div>反正目前服务器支持标准模式，Relax，AP三种模式！</div>
			<div>目前最多允许开三个小号，开多了全ban掉。</div>
				<div class="ui centered segments" style="padding: 20px;">
	<p>我开发此服务器的目标是搞一个高水平训练服务器，旨在帮助玩家提升屙屎水平</p>
	<p>目前只有基础的功能：注册登录、排行榜、osu!Direct（会根据ip所在地自动选择镜像，中国大陆地区将使用sayobot作为direct源）、机器人（游戏内打!help查看所有命令，比如用!ppboard把游戏内原本展示分数的排行榜变为展示pp的榜）、mp命令（!mp help，!mp make）、旁观、回放（正常）、中文名也可以搞，但是我不知都需不需要？</p>
	<p>目前基础的游戏模式：标准模式、relax模式、ap模式</p>
	<p>所有的图都有排行榜，love有pp</p>
	<p>待实现的东西：新网站、服务器反作弊、官服成绩导入、训练计划、score v2游戏模式、自定义pp算法</p>
	<p>现在是搞测试中，有啥问题可以来问我</p>
	</div>
	<div style="font-weight: bold;">连接服务器的方式目前有三种（任选其一）：</div>
	<br>
	<div><a href="https://dl.kafuu.pro/switcher.exe">1（最普遍的方法）、服务器切换器，需要更改hosts、安装证书的服务器切换器（与osu.ppy.sb和其他私服一致，修改hosts后在游戏时无法查看osu官网，无法挂梯子连接服务器）</a></div>
	<br>
	<div><a href="https://dl.kafuu.pro/kafuu.exe">2（推荐）、定制的osu客户端！（放入osu目录中运行 [如果直接运行会下载全新的客户端。。]，与官服不冲突，无封号风险，不修改系统设置，游戏时可查看osu官网，可以挂梯子连接服务器）</a></div>
	<br>
	<div>3、（需要教程，还没写）客户端补丁器，会创建一个osu.exe的副本，与定制客户端基本相同，但是有些地方不太齐全（如连接跳转）</div>
	<div>人工客服：可加入pr群（233283633）或osuKafuu群（955377404）</div>
			</div>
		</div>
	{{/* MarginBoi */}}
	<br> 
	{{/* Global Statistics */}}
	<div class="ui stackable column divided grid" id="first-grid">
		<div class="eight wide column" >
			<div class="ui segments" style="height: 100%; padding: 20px; font-size: 20px !important;">
				<div class="sixteen wide column" style="margin-bottom: 11px;">
						<div class="ui grid">
							<div class="twelve wide column">
								<div>{{ range $key, $value := (qb "SELECT COUNT(*) FROM users WHERE privileges >= 3") }}
								{{ rediget "ripple:online_users" }} / {{ $value }}
								{{ end }}</div>
								<div>在线人数 / 注册人数</div>
							</div>
						</div>
				</div>
			<div class="sixteen wide column" style="margin-bottom: 11px;">
					<div class="ui grid">
						<div class="twelve wide column">

							最新玩家：
														{{ range $key, $value := (qb "SELECT username FROM users WHERE privileges >=3 ORDER BY id DESC LIMIT 1") }}
							{{ range $key, $valu := (qb "SELECT id FROM users WHERE privileges >=3 ORDER BY id DESC LIMIT 1") }}
								<a href="/u/{{ $valu }}" style="color: inherit;">{{ $value }}</a>
							{{ end }}
							{{ end }}
						</div>
			  </div>
			  <div class="sixteen wide column">
                    <div class="ui grid">
                        <div class="twelve wide column">
                             {{ $value := (qb "SELECT ROUND(SUM(scores.pp)) AS pp FROM scores INNER JOIN users ON scores.userid = users.id WHERE scores.completed = 3 AND scores.play_mode = 0 AND users.privileges > 2") }}
                        
                        服务器PP总数：{{$value.pp}}
                        </div>
                </div>
            </div>
		</div>
	</div>
</div>

	<div class="eight wide column">
		<div class="ui segments" style="height: 100%; padding: 20px;">
			<div class="sixteen wide column" style="margin-bottom: 11px;">
					<div class="ui grid">
						<div class="twelve wide column">
							{{ $d := (qb "SELECT ROUND(pp) AS pp, users.username, users.id FROM scores INNER JOIN users ON scores.userid = users.id WHERE scores.play_mode = 0 AND completed = 3 AND users.privileges > 2 ORDER BY pp DESC LIMIT 1") }}
							<p class="status-head">{{ $d.pp }}pp</p>
							<p class="status-head" style="font-size: 10px!important;">{{ .T "Done by " }}<a href="/u/{{ $d.id }}">{{ $d.username }}</a></p>
							<p class="status-footer">{{ .T "最高STD成绩" }}</p>
						</div>
				</div>
			</div>
			<div class="sixteen wide column" style="margin-bottom: 11px;">
					<div class="ui grid">
						<div class="twelve wide column">
							{{ $rx := (qb "SELECT ROUND(pp) AS pp, users.username, users.id FROM scores_relax INNER JOIN users ON scores_relax.userid = users.id WHERE scores_relax.play_mode = 0 AND completed = 3 AND users.privileges > 2 ORDER BY pp DESC LIMIT 1") }}
							<p class="status-head">{{ $rx.pp }}pp</p>
							<p class="status-head" style="font-size: 10px!important;">{{ .T "Done by " }}<a href="/u/{{ $rx.id }}">{{ $rx.username }}</a></p>
							<p class="status-footer">{{ .T "最高RX成绩" }}</p>
						</div>
				</div>
			</div>
			<div class="sixteen wide column">
					<div class="ui grid">
						<div class="twelve wide column">
							{{ $ap := (qb "SELECT ROUND(pp) AS pp, users.username, users.id FROM scores_ap INNER JOIN users ON scores_ap.userid = users.id WHERE scores_ap.play_mode = 0 AND completed = 3 AND users.privileges > 2 ORDER BY pp DESC LIMIT 1") }}
							<p class="status-head">{{ $ap.pp }}pp</p>
							<p class="status-head" style="font-size: 10px!important;">{{ .T "Done by " }}<a href="/u/{{ $ap.id }}">{{ $ap.username }}</a></p>
							<p class="status-footer">{{ .T "最高AP成绩" }}</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div> {{/* Global Stats end past this /div */}}
	</div>
	</div>
	
	{{ end }}
	